# showtime-service-deploy.yaml

---
# 1. Deployment (Pod ì •ì˜)
apiVersion: apps/v1
kind: Deployment
metadata:
  name: showtime-service
  labels:
    app: showtime-service
spec:
  replicas: 2 # í•„ìš”ì— ë”°ë¼ Pod ê°œìˆ˜ ì¡°ì •
  selector:
    matchLabels:
      app: showtime-service
  template:
    metadata:
      labels:
        app: showtime-service
    spec:
      containers:
      - name: showtime-service
        image: 343218219945.dkr.ecr.ap-northeast-2.amazonaws.com/showtime-service:5cc010cd9d200809a1c34d8b39f23a58ab20ae1a
        ports:
        - containerPort: 3001 # ğŸ’¡ showtime-serviceì˜ ì‹¤ì œ ë¦¬ìŠ¤ë‹ í¬íŠ¸
        # showtime-serviceê°€ DBë¥¼ ì‚¬ìš©í•œë‹¤ë©´, booking-serviceì²˜ëŸ¼ Secretì„ ì—°ê²°í•´ì•¼ í•¨
        
---
# 2. Service (ë‚´ë¶€ ë¡œë“œ ë°¸ëŸ°ì‹± ì •ì˜)
apiVersion: v1
kind: Service
metadata:
  name: showtime-service-svc
  labels:
    app: showtime-service
spec:
  selector:
    app: showtime-service # Deploymentì˜ Labelê³¼ ì¼ì¹˜
  ports:
    - protocol: TCP
      port: 80 # Serviceê°€ ë…¸ì¶œí•  í¬íŠ¸
      targetPort: 3001 # ğŸ’¡ ì»¨í…Œì´ë„ˆ í¬íŠ¸ì™€ ì¼ì¹˜
  type: ClusterIP