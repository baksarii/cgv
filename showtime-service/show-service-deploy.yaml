---
# 1. Deployment (Pod ì •ì˜)
apiVersion: apps/v1
kind: Deployment
metadata:
  name: showtime-service
  labels:
    app: showtime-service
spec:
  replicas: 2 
  selector:
    matchLabels:
      app: showtime-service
  template:
    metadata:
      labels:
        app: showtime-service
    spec:
      containers:
      - name: showtime-service
        image: 343218219945.dkr.ecr.ap-northeast-2.amazonaws.com/showtime-service:202512150615
        ports:
        - containerPort: 3001 
        
        # ğŸ’¡ DB ì ‘ì† ì •ë³´ë¥¼ ìœ„í•œ í™˜ê²½ ë³€ìˆ˜(env) ì¶”ê°€ ì‹œì‘
        env:
        - name: DB_HOST
          value: "cgv-db.cvsiy4oi6x0z.ap-northeast-2.rds.amazonaws.com" # âš ï¸ RDS ì—”ë“œí¬ì¸íŠ¸
        - name: DB_USER
          value: "admin"
        - name: DB_PASSWORD
          # ğŸš¨ ë³´ì•ˆì— ì·¨ì•½í•˜ë¯€ë¡œ, ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” Kubernetes Secretì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
          # ğŸš¨ í˜„ì¬ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì§ì ‘ ì…ë ¥í•©ë‹ˆë‹¤. (ì¬ì„¤ì •í•œ ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©)
          value: "12341234" 
        - name: DB_NAME
          value: "cgv_showtime_db"
        # ğŸ’¡ í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€ ë
        
---
# 2. Service (ë‚´ë¶€ ë¡œë“œ ë°¸ëŸ°ì‹± ì •ì˜)
apiVersion: v1
kind: Service
metadata:
  name: showtime-service-svc
  labels:
    app: showtime-service
spec:
  selector:
    app: showtime-service
  ports:
    - protocol: TCP
      port: 80 
      targetPort: 3001
  type: ClusterIP